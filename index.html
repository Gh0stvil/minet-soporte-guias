<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MINET | Soporte</title>

  <!-- Iconos -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>

<div class="layout">

  <!-- SIDEBAR PRINCIPAL -->
  <aside class="sidebar">
    <nav class="sidebar-icons">

      <div class="nav-item active" data-section="home">
        <i class="fa-solid fa-house"></i>
        <span>Inicio</span>
      </div>

      <div class="nav-item" data-section="asistente">
        <i class="fa-solid fa-wand-magic-sparkles"></i>
        <span>Asistente</span>
      </div>

      <div class="nav-item" data-section="router">
        <i class="fa-solid fa-file-arrow-down"></i>
        <span>Descargas</span>
      </div>

    </nav>
  </aside>

  <!-- CONTENIDO -->
  <main class="content-wrapper">
    <div class="content" id="content"></div>
  </main>

</div>

<script>

  /*
  #########################
  # Botones de navegación #
  #########################
  */
  const items = document.querySelectorAll(".nav-item");

  items.forEach(item => {
    item.addEventListener("click", () => {
      items.forEach(i => i.classList.remove("active"));
      item.classList.add("active");
    });
  });

/* =====================================================
   ESTADO DEL USUARIO (flujo de decisiones)
===================================================== */
const userFlow = {
  instalacion: null,
  energia: null,
  accion: null,
  router: null
};

/* =====================================================
   FUNCIÓN BASE PARA RENDERIZAR CONTENIDO
===================================================== */
function render(html) {
  document.getElementById("content").innerHTML = html;
}

/* =====================================================
   HOME
===================================================== */
function loadHome() {
  render(`
  <div class="home">
    <img src="assets/img-guias/Minet.png" alt="MINET Logo" style="width: 150px; margin-bottom: 20px;" />
    <h1>Bienvenido a MINET</h1>
    <p>
      Este asistente te ayudará a resolver problemas básicos de conexión
      de forma rápida y guiada.
    </p>
    <p>Selecciona <strong>Asistente</strong> para comenzar.</p>
  </div>
  `);
}

/* =====================================================
   ASISTENTE - PASO 1
===================================================== */
function askInstalacion() {
  resetFlow();
  render(`
    <h2>¿Qué tipo de instalación tienes?</h2>

    <div class="options">
      <button onclick="selectInstalacion('antena')">Antena</button>
      <button onclick="selectInstalacion('fibra')">Fibra óptica</button>
    </div>
  `);
}

function selectInstalacion(tipo) {
  userFlow.instalacion = tipo;
  askEnergy();
}

/* =====================================================
   PASO 2 - MINI UPS
===================================================== */
function askEnergy() {
  render(`
    <h2>¿Tu instalación tiene Mini UPS?</h2>

    <div class="options">
      <button onclick="selectEnergy('con-ups')">Con Mini UPS</button>
      <button onclick="selectEnergy('sin-ups')">Sin Mini UPS</button>
    </div>
  `);
}

function selectEnergy(tipo) {
  userFlow.energia = tipo;
  askAction();
}

/* =====================================================
   PASO 3 - ACCIÓN
===================================================== */
function askAction() {
  render(`
    <h2>¿Qué deseas realizar?</h2>
    <p class="note">
      En la mayoría de los casos, un reinicio de equipos
      soluciona los problemas de conexión.
    </p>

    <div class="options">
      <button onclick="selectAction('reinicio')">Reinicio de equipos</button>
      <button onclick="selectAction('wifi')">Cambiar WiFi</button>
    </div>
  `);
}

function selectAction(action) {
  userFlow.accion = action;

  if (action === "wifi") {
    askRouter();
  } else {
    resolveGuide();
  }
}

/* =====================================================
   PASO 4 - ROUTER (solo WiFi)
===================================================== */
function askRouter() {
  render(`
    <h2>¿Qué marca de router tienes?</h2>

    <div class="options">
      <button onclick="selectRouter('mercusys')">Mercusys</button>
      <button onclick="selectRouter('tplink')">TP-Link</button>
      <button onclick="selectRouter('tenda')">Tenda</button>
    </div>
  `);
}

function selectRouter(router) {
  userFlow.router = router;
  resolveGuide();
}

/* =====================================================
   RESOLUCIÓN FINAL
===================================================== */
function resolveGuide() {

  // Reinicios (no dependen del router)
  if (userFlow.accion === "reinicio") {
    const path = `guias/reinicios/${userFlow.instalacion}-${userFlow.energia}.html`;
    goToGuide(path);
    return;
  }

  // WiFi (sí depende del router)
  if (userFlow.accion === "wifi") {
    const path = `guias/wifi/${userFlow.router}.html`;
    goToGuide(path);
  }
}

/* =====================================================
   CARGA DE HTML EXTERNO
===================================================== */
function goToGuide(path) {
  window.location.href = path;
}


/* =====================================================
   UTILIDADES
===================================================== */
function resetFlow() {
  userFlow.instalacion = null;
  userFlow.energia = null;
  userFlow.accion = null;
  userFlow.router = null;
}

/* =====================================================
   SIDEBAR
===================================================== */
document.querySelectorAll(".nav-item").forEach(item => {
  item.addEventListener("click", () => {

    document.querySelectorAll(".nav-item").forEach(i =>
      i.classList.remove("active")
    );

    item.classList.add("active");

    const section = item.dataset.section;

    if (section === "home") loadHome();
    if (section === "asistente") askInstalacion();
  });
});

/* =====================================================
   CARGA INICIAL
===================================================== */
loadHome(); 
</script>

</body>

/*
Estilos CSS
*/

<style>

/* =====================
   RESET
===================== */

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Arial;
}

html, body {
  width: 100%;
  height: 100%;
  overflow: hidden;
}

/* =====================
   LAYOUT DESKTOP
===================== */

body {
  background-color: #051936;
  color: #e6e6e6;
   background:
    linear-gradient(
      185deg,
      #2ba3d3 0%,
      #1e3a8a 35%,
      #1d0442 70%,
      #06000f 100%
    );
}

.layout {
  display: flex;
  height: 100vh;
}

/* =====================
   SIDEBAR
===================== */

.sidebar {
  width: 64px;
  background-color: #051936;
  display: flex;
  justify-content: center;
  position: fixed;
  left: 0;
  top: 0;
  bottom: 0;
  z-index: 1000;
  background:
    linear-gradient(
      120deg,
      #2ba3d3 0%,
      #1e3a8a 35%,
      #1d0442 70%,
      #06000f 100%
    );
}

.sidebar-icons {
  display: flex;
  flex-direction: column;
  gap: 14px;
  margin-top: 16px;
}

/* =====================
   ITEMS
===================== */

.nav-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 6px;
  border-radius: 12px;
  cursor: pointer;
  transition: background 0.25s ease;
}

.nav-item span {
  font-size: 0.65rem;
  opacity: 0.85;
  border-top: 2px solid #e6e6e6;
}

.nav-item i {
  font-size: 1.3rem;
  width: 42px;
  height: 42px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: transform 0.25s ease, background 0.25s ease, color 0.25s ease;
}

.nav-item:hover i {
  transform: scale(1.12);
}

.nav-item:hover,
.nav-item.active {
  background-color: rgba(255,255,255,0.08);
}

.nav-item.active i {
  background-color: #e6e6e6;
  color: #051936;
}

/* =====================
   CONTENIDO
===================== */

.content-wrapper {
  margin-left: 64px;
  width: calc(100% - 64px);
  height: 100vh;
  padding: 16px;
}

.content {
  height: 100%;
  overflow-y: auto;
  padding: 20px;
  border-radius: 16px;

  background:
    linear-gradient(
      180deg,
      #2ba3d3 0%,
      #1e3a8a 35%,
      #1d0442 70%,
      #06000f 100%
    );
}

/* =====================
   MOBILE
===================== */

@media (max-width: 768px) {

  .layout {
    display: block;
    height: auto;
  }

  /* SIDEBAR ABAJO */
  .sidebar {
    top: auto;
    bottom: 0;
    left: 0;
    right: 0;
    width: 100%;
    height: 70px;
  }

  .sidebar-icons {
    flex-direction: row;
    justify-content: space-around;
    align-items: center;
    height: 100%;
    margin: 0;
  }

  .nav-item {
    gap: 2px;
    flex-direction: column-reverse;
  }

  .nav-item span {
    font-size: 0.6rem;
    border:hidden;
    border-bottom: 2px solid #e6e6e6;
  ;
  }

  .nav-item i {
    font-size: 1.2rem;
  }

  /* CONTENIDO */
  .content-wrapper {
    margin: 0;
    width: 100vw;
    height: calc(100vh - 70px);
    padding: 0;
  }

  .content {
    border-radius: 0px 0px 16px 16px;
    height: 100%;
    padding: 16px;
  }
}

</style>
</html>
